include("${CMAKE_CURRENT_LIST_DIR}/libcmake/enhanced_find.cmake")
include("${CMAKE_CURRENT_LIST_DIR}/libcmake/enhanced_try_run.cmake")
include("${CMAKE_CURRENT_LIST_DIR}/libcmake/print_test_status.cmake")

ceu_enhanced_find_library(LIBARMADILLO_LIBRARY_SHARED PKGCONFIG_NAME armadillo LINKER_FLAG armadillo)
ceu_enhanced_find_library(STATIC LIBARMADILLO_LIBRARY_STATIC PKGCONFIG_NAME armadillo LINKER_FLAG armadillo)

if (LIBARMADILLO_LIBRARY_SHARED)
    enhanced_try_run(VARNAME LIBARMADILLO SRC_PATH "test_armadillo.cpp" LINK_LIBRARIES "${LIBARMADILLO_LIBRARY_SHARED}")
else ()
    set(HAVE_WORKING_LIBARMADILLO_RUN_SHARED 127 CACHE INTERNAL "doc")
    set(HAVE_WORKING_LIBARMADILLO_COMPILE_SHARED FALSE CACHE INTERNAL "doc")
endif ()
if (LIBARMADILLO_LIBRARY_STATIC)
    enhanced_try_run(STATIC VARNAME LIBARMADILLO SRC_PATH "test_armadillo.cpp" LINK_LIBRARIES "${LIBARMADILLO_LIBRARY_SHARED}")
else ()
    set(HAVE_WORKING_LIBARMADILLO_RUN_STATIC 127 CACHE INTERNAL "doc")
    set(HAVE_WORKING_LIBARMADILLO_COMPILE_STATIC FALSE CACHE INTERNAL "doc")
endif ()

print_test_status("armadillo" LIBARMADILLO LIBARMADILLO)
